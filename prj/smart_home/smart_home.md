1.三级预警

thread1 for ATH21 read temperature

if(temp>alarm_1) thread_event_send(&event,EVENT_FLAG1);





### esp8266模式

1. **STA模式（Station）**
   - ESP8266作为客户端连接现有WiFi网络（如路由器）
   - 可访问互联网或局域网设备
   - 典型应用：物联网设备联网上报数据
2. **AP模式（Access Point）**
   - ESP8266自建WiFi热点
   - 其他设备直连ESP8266（无互联网功能，除非额外配置）
   - 典型应用：配网界面或点对点通信
3. **STA+AP模式**
   - 同时运行STA和AP
   - 既能连接外部WiFi，又能被其他设备连接
   - 优势：双通道通信，适合中继或调试场景

## ESP8266 的 AT指令

AT指令是应用于终端设备与PC应用之间的连接与通信的指令，说白了，AT指令就是大家定义好的，能表达特殊意义的字符串，每条AT命令中只能包含一条AT指令，就比如说A发送：“吃饭了”，B就会回复：“好的”。

AT指令用法：

1、测试命令（Test Command）

仅仅发送指令 “AT” 即测试ESP8266模块是否准备好，若准备好则响应“OK”。

2、读取命令(Read Command)

在AT指令后面加上“=?”即构成测试命令。例如“AT+MODE?”，会列举当前是什么模式。

3、执行命令（Execute Command）

在AT指令后面加上“=”再接上相应的参数即可，例如“AT+MODE=NORMAL”，将当前模式设置为正常模式。对于一些没有参数的指令则不需要加参数， 比如”AT+RESET”。

## 3.3. AP/STA模式

**AP：** 即无线接入点，是无线网络的中心节点，我们常使用的路由器就是一个AP。ESP8266 可以工作在AP模式，设置为AP模式、开启热点之后就可以用手机来连接 ESP8266。

**STA：** 每一个连接到无线网络的终端都可以理解为一个STA。ESP8266 也可以工作在STA模式，配置为STA模式之后就可以连接路由器的WiFi。

## 3.4. TCP/UDP/透传

### 3.4.1. TCP

TCP是一种面向连接的，提供可靠交付服务和全双工通信的，基于字节流的端到端的传输层通信协议。

1. TCP在传输数据之前必须先建立连接，数据传输结束后要释放连接。
2. 每一条TCP连接只能有2个端点，故TCP不提供广播或多播服务。
3. TCP提供可靠交付，通过TCP连接传输的数据，无差错、不丢失、不重复、并且按序到达。
4. TCP是面向字节流的。虽然应用进程和TCP的交互是一次一个数据块(大小不等），但TCP把应用程序交下来的数据看成仅仅是一连串的无结构的字节流。TCP并不知道所传输的字节流的含义。

### 3.4.2. UDP

UDP是一种无连接的，尽最大努力交付的，基于报文的端到端的传输层通信协议。

1. UDP，在发送数据之前不需要建立连接。
2. UDP不保证可靠交付，主机不需要位置复杂的连接状态。
3. UDP是面向报文的。UDP对应用层交下来的报文，既不合并，也不拆分，而是保留这些报文的的边界，即应用层交给UDP多长的报文，UDP就照样发送，即一次发送一个报文。在接收端，UDP一次交付一个完整的报文。
4. UDP没有拥塞控制，网络出现的拥塞不会使源主机的发送速率降低。
5. UDP支持一对一、一对多、多对一和多对多的交互通信。
6. UDP的首部开销小，只有8个字节，比TCP的20个字节的首部要短。

### 3.4.3. 透传

透传即透明传输，是指在传输中不管传输的内容是什么，只关心传输时的源地址和目标地址，对数据内容不做任何改变。
