### SPI、UART、I2C通信的定义、应用与区别

SPI（Serial Peripheral Interface，串行外设接口）、UART（Universal Asynchronous Receiver/Transmitter，通用异步接收/发送器）和I2C（Inter-Integrated Circuit，互连集成电路）是常见的串行通信协议，它们在硬件接口、通信方式以及适用场景方面各具特色。

在网上找到了这3种通信的示意图，先作大致了解：

![alt](E:\076lxl\work\note4embedded\32\通讯协议\assets\38630241A8024EA006101538D9D640D5.gif)

以下是对这三种通信协议的详细介绍以及它们之间的区别与应用。

### 一、SPI通信

#### **定义与特点**：

SPI是一种高速、全双工、同步的串行通信协议，常用于微控制器和外设之间的数据交换。它通常使用四根线路：**MISO**（主设备输入从设备输出）、**MOSI**（主设备输出从设备输入）、**SCK**（时钟线）和**CS**（片选线）。通过这四根线，SPI能够实现全双工数据传输，允许同时进行数据的发送和接收，从而提高通信效率。

SPI的主要特点包括：

- **全双工通信**：能够同时发送和接收数据。
- **灵活配置**：支持多种数据传输模式，能够根据需求配置时钟极性、相位等参数。
- **同步传输**：依赖时钟信号同步主从设备之间的数据传输，确保数据的准确性和稳定性。
- **高速性能**：相较于其他串行协议，SPI的数据传输速率较高，适用于需要高带宽的应用。

#### **应用领域**：

SPI广泛应用于嵌入式系统、传感器数据采集、存储器接口等领域。常见的应用包括：

- EEPROM、FLASH存储器接口。
- 模数转换器（ADC）、数模转换器（DAC）。
- LCD驱动器、音频设备、传感器、MCU之间的通信。

SPI适用于需要高带宽且设备之间距离较近的应用场景，尤其在嵌入式系统和传感器数据采集等领域中，因其高速和高效性得到广泛应用。

### 二、UART通信

#### **定义与特点**：

UART是一种常见的异步串行通信协议，允许两个设备通过简单的两线接口进行双向数据传输。它不依赖时钟信号来同步数据传输，而是通过预设的波特率来控制数据的传输速度。UART的通信方式是异步的，意味着发送和接收设备各自拥有自己的时钟源，因此它们在通信时不需要共享时钟信号。

UART的主要特点包括：

- **异步通信**：不依赖时钟信号，由波特率来控制数据传输速率。
- **全双工通信**：允许同时进行数据的发送与接收。
- **简单易用**：仅需两条线（TX和RX），硬件实现相对简单，成本较低。
- **可编程波特率**：通信速率可根据需要调整，适应不同的应用需求。

#### **应用领域**：

由于其实现简单且成本较低，UART在各种电子设备中得到了广泛应用。典型的应用场景包括：

- 微控制器与计算机、调制解调器、打印机等设备之间的通信。
- 嵌入式系统中的串行调试接口。
- 远程通信，如无线传输模块。

UART适合于需要较长距离传输或对速度要求不高的应用，且在成本敏感的项目中非常受欢迎。

### 三、I2C通信

#### **定义与特点**：

I2C是一种双线串行通信协议，通常用于微控制器与外设之间或多个设备之间的短距离数据传输。I2C由Philips（现NXP半导体）于1980年代初开发，已成为广泛应用的标准。它仅使用两条线路：**SDA**（串行数据线）和**SCL**（串行时钟线）。I2C协议支持多主机和多从设备的配置，能够在同一总线上实现多设备的通信。

I2C的主要特点包括：

- **双线设计**：只需要两条线（SDA和SCL）即可实现设备之间的通信，节省了接口资源。
- **主从式通信**：一个主设备控制总线并发起通信，而从设备则响应主设备的请求。
- **较低的硬件复杂性**：相较于SPI，I2C的硬件实现更简单，适用于集成电路之间的通信。
- **支持多设备通信**：I2C允许多个从设备共享同一总线，适用于设备数量较多的场景。

#### **应用领域**：

I2C在许多电子设备和应用中得到了广泛的应用，特别是在对硬件资源和连接线要求较高的场景。典型应用包括：

- 传感器（如温度传感器、湿度传感器）。
- 存储器（如EEPROM）。
- 实时时钟（RTC）、显示器、音频模块。
- 微控制器与外设之间的通信，特别是在传输距离较短的应用中。

I2C适合于短距离数据传输，且总线上的设备数量不宜过多，因此在多设备通信的嵌入式系统中非常流行。

#### 时序

字节传输 数据帧（高低位）

#### 挂载设备数

由IIC地址决定，8位地址，减去1位广播地址，是7位地址，2^7=128，但是地址0x00不用，那就是127个地址，所以理论上可以挂127个从器件。

IIC协议没有规定总线上device最大数目，但是规定了**总线电容不能超过400pF**。
管脚都是有输入电容的，PCB上也会有寄生电容，所以会有一个限制。实际设计中经验值大概是**不超过8个器件。**
总线之所以规定电容大小是因为，IIC的OD要求外部有电阻上拉，电阻和总线电容产生了一个RC延时效应，电容越大信号的边沿就越缓，有可能带来信号质量风险。
传输速度越快，信号的窗口就越小，上升沿下降沿时间要求更短更陡峭，所以RC乘积必须更小

### 四、SPI、UART与I2C的区别总结

|                | SPI                                      | UART                                     | IIC                                        |
| -------------- | ---------------------------------------- | ---------------------------------------- | ------------------------------------------ |
| **通信方式**   | 同步传输，主从模式（Master-Slave）       | 异步传输，点对点通信                     | 同步传输，主从模式（Master-Slave）         |
| **数据线数量** | 4根线（MISO、MOSI、SCK、SS/CS）          | 2根线（TX、RX）                          | 2根线（SDA、SCL）                          |
| **通信速率**   | 高速（可支持几Mbps至几十Mbps）           | 中等（通常在几kbps到几Mbps之间）         | 中等（通常在几kbps到几Mbps之间，可调节）   |
| **通信距离**   | 短（通常适用于板内或近距离设备间的通信） | 长（适用于中长距离通信，最高可达数百米） | 短（通常用于板内或近距离集成电路间通信）   |
| **配置灵活性** | 高（支持多种传输模式，如全双工、半双工） | 中等（通过调整波特率、数据位、停止位等） | 高（支持不同的速率、地址模式、时序等配置） |
| **最大设备数** | 多主设备与多个从设备（点对多通信）       | 一对设备（点对点通信）                   | 一个主设备与多个从设备（点对多通信）       |
| **传输方式**   | 全双工，数据同时传输与接收               | 全双工，但数据发送与接收是异步的         | 半双工，数据传输和接收交替进行             |
| **应用场景**   | 嵌入式系统、高速数据采集、传感器网络等   | 计算机与外设通信、无线模块、调制解调器等 | 集成电路通信、传感器接口、低速外设连接等   |